# SEP-001: Multimedia Metadata in Decentralized Systems

**Status:** Draft **|** **Category:** Standards

* [Introduction](#introduction)
* [Summary](#summary)
* [Motivation](#motivation)
* [Rationale](#rationale)
* [Requirements and Expectations](#requirements-and-expectations)
  * [Structure of JSON Web Token](#structure-of-json-web-token)
  * [Additional Claims](#additional-claims)
* [Examples](#examples)
* [Conclusion](#conclusion)
* [References](#references)

## Introduction

The purpose of this document is to propose a standard for transmitting and managing multimedia resources over decentralized networks. This standard aims to achieve interoperability, security and federation of such resources.

The proposed standard uses JSON Web Tokens (JWT) as the standard container for metadata. It extends JWTs with additional claims to represent the structural, descriptive, and technical metadata of the resources.

## Summary

In general, the proposed standard extends the JWT standard by adding additional "claims" to embed metadata related to media resources and aims to group as many media types as possible into a common subset of tags that apply to all media and then reduce them to write specific fields with the ultimate goal of promoting interoperability and federation of multimedia resources in decentralized networks.

## Motivation

Currently, the majority of media resources are transmitted through centralized systems that are managed by a central authority. This authority controls the consumption, transmission, and management of the resources. However, in decentralized environments such as IPFS, there is a lack of standardization or specification defining the metadata structure for multimedia resources.

The absence of standardization presents significant challenges in managing resources, ensuring their security, ownership, and transmitting resources among all participating nodes. Additionally, managing digital rights of resources transmitted across the network presents another substantial challenge, as there are no organic action mechanisms in place to establish proof of ownership of digital resources.

## Rationale

1. Why JWT?

> Interoperability is one of the main reasons behind the use of JWTs. JWTs are an industry-standard format, widely recognized and supported by many programming languages, frameworks, and tools. We believe that JSON Web Tokens (JWTs) can encapsulate our current standard and eventually evolve into a more secure standard, through the use of JSON Web Signature ([RFC7515](https://www.rfc-editor.org/rfc/rfc7515)).

2. Why does it need to be signed?

> By allowing the verification of the data origin through a digital signature, it becomes possible to provide "proof of ownership".
>
> Imagine a token that can be verified by different nodes in the network instead of being validated by a centralized machine. In this case, the difference in the signature is that the "secret" is not kept private for verification. Rather, the "secret" is converted to a public key, which serves as an identity that allows us to verify the authenticity of the token by any entity that wants to consume the resource

## Requirements and Expectations

This standard is governed by the principles established in [RFC2119](https://www.rfc-editor.org/rfc/rfc2119), which means that it uses the following keywords to indicate the level of requirement:

1. **MUST**: indicates an absolute requirement.
2. **SHOULD**: indicates a strong recommendation, but not mandatory.
3. **MAY**: indicates an option that may be considered, but is not mandatory.

### Structure of JSON Web Token

JWT is used as a container or encapsulating structure for the metadata and MUST follow the basic structure defined in the [RFC7519](https://www.rfc-editor.org/rfc/rfc7519) specification.

Based on the context of the implementation, extending the standard for creating the `header` of the JSON Web Token (JWT) by including the `typ` claim MUST be used to establish the `format` of the multimedia resource related to the context of the implementation, based on [IANA MediaTypes](https://www.iana.org/assignments/media-types/media-types.xhtml).

```json
{
    "typ": "image/jpeg",
    "alg": "HS256"
}
```

### Additional Claims

The proposed standard introduces additional "claims" that represent the structural, descriptive, and technical metadata of multimedia resources. These claims serve as a starting point for a set of useful and interoperable claims. To maintain a compact representation, all names are kept short.

1. **"s" structural metadata**

    Structural metadata MUST represent information that describes the internal structure of a multimedia resource. The following fields MUST be included in the **"s"** claim and interoperates according to the way the resources are stored:

    ```json
    {
      "s": {
        "cid": "string",
        "path": "string"
      }
    }
    ```

    * "cid": It MUST be a string representing the Content Identifier (CID) of the multimedia resource or resource directory.
    * "path": This field MAY be used to describe how to get to the resource if the CID points to a directory.

    The "s" claim MUST be included in the payload of the JWT metadata for each multimedia resource being transmitted over the decentralized network.

2. **"d" descriptive metadata**

    Descriptive metadata MUST represent information that describes the content of a multimedia resource. The following fields MUST be included in the **"d"** claim, and custom fields MAY be added to include any other relevant information related to the resource description:

    ```json
    {
      "d": {
        "title": "string",
        "desc": "string"
      }
    }
    ```

    * "title": It MUST be a string expressing the title of the multimedia resource.
    * "desc": It MUST be a string expressing the description of the multimedia resource.

    The "d" claim MUST be included in the payload of the JWT metadata for each multimedia resource being transmitted over the decentralized network.

3. **"t" technical metadata**

    Technical metadata MUST represent information that describes the technical characteristics of a multimedia resource. The following fields SHOULD be included in the **"t"** claim, and custom fields MAY be added to include any other relevant information related to the technical characteristics:

    ```json
    {
      "t": {
        "size": "integer",
        "width": "integer",
        "height": "integer",
        "codec": "string",
        "length": "integer",
        "fps": "string",
      }
    }
    ```

    * "size": The size of the resource. It MUST be expressed in bytes.
    * "width": The horizontal resolution of the resource. It MUST be expressed in pixels.
    * "height": The vertical resolution of the resource. It MUST be expressed in pixels.
    * "codec": The codec used to encode audio/video. For example, 'h264'.
    * "length": The duration of the audio/video. It MUST be expressed in milliseconds.
    * "fps": The number of frames per second in the video. It MUST be expressed in frames per second (fps). For example, '60fps'.

    The "t" claim MAY be included in the payload of the JWT metadata for each multimedia resource being transmitted over the decentralized network.

## Examples

**Structural:**

```json
{
  "s": {
    "cid": "QmcLSCQgyttm6E3q1mZ9C9Xj5ue5iLb5yqca3z5LyavJgK",
    "path": "/videos/cat_video.mp4"
  }
}
```

**Descriptive:**

```json
{
  "d": {
    "title": "A day in the life of a dog",
    "desc": "This video shows the daily routine of a happy dog",
    "author": "John Smith",
    "location": "Central Park",
    "tags": ["dog", "pets", "animals"],
    "language": "English"
  }
}
```

 **Technical:**

```json
{
  "t": {
    "size": 256846,
    "width": 1920,
    "height": 1080,
    "codec": "h.264",
    "length": 124350,
    "fps": "30fps",
    "resolution": "Full HD",
    "aspect_ratio": "16:9"
  }
}
```

## Conclusion

This standard defines a mechanism for encoding and transmitting metadata related to multimedia resources over decentralized networks. The use of JSON Web Tokens as the container structure for metadata enables interoperability, security and federation of such resources. The proposed standard defines the necessary additional claims to represent the structural, descriptive, and technical metadata of multimedia resources. The implementation of this standard MUST follow the specifications and expectations defined in this document.

## References

* [RFC2119](https://www.rfc-editor.org/rfc/rfc2119): Key words for use in RFCs to Indicate Requirement Levels
* [RFC7519](https://www.rfc-editor.org/rfc/rfc7519#section-4.1): JSON Web Token (JWT)
